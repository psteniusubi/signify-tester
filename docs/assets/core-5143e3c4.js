const g=typeof atob=="function",A=typeof btoa=="function",l=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=Array.prototype.slice.call(m),s=(t=>{let e={};return t.forEach((r,o)=>e[r]=o),e})(a),w=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),d=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),B=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),y=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),x=t=>{let e,r,o,n,c="";const u=t.length%3;for(let f=0;f<t.length;){if((r=t.charCodeAt(f++))>255||(o=t.charCodeAt(f++))>255||(n=t.charCodeAt(f++))>255)throw new TypeError("invalid character found");e=r<<16|o<<8|n,c+=a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[e&63]}return u?c.slice(0,u-3)+"===".substring(u):c},_=A?t=>btoa(t):l?t=>Buffer.from(t,"binary").toString("base64"):x,h=l?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let o=0,n=t.length;o<n;o+=4096)r.push(i.apply(null,t.subarray(o,o+4096)));return _(r.join(""))},U=(t,e=!1)=>e?B(h(t)):h(t),C=t=>{if(t=t.replace(/\s+/g,""),!w.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",o,n;for(let c=0;c<t.length;)e=s[t.charAt(c++)]<<18|s[t.charAt(c++)]<<12|(o=s[t.charAt(c++)])<<6|(n=s[t.charAt(c++)]),r+=o===64?i(e>>16&255):n===64?i(e>>16&255,e>>8&255):i(e>>16&255,e>>8&255,e&255);return r},E=g?t=>atob(y(t)):l?t=>Buffer.from(t,"base64").toString("binary"):C,T=l?t=>d(Buffer.from(t,"base64")):t=>d(E(t).split("").map(e=>e.charCodeAt(0))),v=t=>T(S(t)),S=t=>y(t.replace(/[-_]/g,e=>e=="-"?"+":"/"));let z=class{static from(e){throw new Error("not implemented")}static concat(e){let r=0;for(const n of e)r+=n.length;const o=new Uint8Array(r);r=0;for(const n of e)o.set(n,r),r+=n.length;return o}};class D{static encode(e){return U(e,!0)}static decode(e){return v(e)}}class p{static encode(e){return new TextEncoder().encode(e)}static decode(e){return new TextDecoder().decode(e)}}const b=new Map([[0,"A"],[1,"B"],[2,"C"],[3,"D"],[4,"E"],[5,"F"],[6,"G"],[7,"H"],[8,"I"],[9,"J"],[10,"K"],[11,"L"],[12,"M"],[13,"N"],[14,"O"],[15,"P"],[16,"Q"],[17,"R"],[18,"S"],[19,"T"],[20,"U"],[21,"V"],[22,"W"],[23,"X"],[24,"Y"],[25,"Z"],[26,"a"],[27,"b"],[28,"c"],[29,"d"],[30,"e"],[31,"f"],[32,"g"],[33,"h"],[34,"i"],[35,"j"],[36,"k"],[37,"l"],[38,"m"],[39,"n"],[40,"o"],[41,"p"],[42,"q"],[43,"r"],[44,"s"],[45,"t"],[46,"u"],[47,"v"],[48,"w"],[49,"x"],[50,"y"],[51,"z"],[52,"0"],[53,"1"],[54,"2"],[55,"3"],[56,"4"],[57,"5"],[58,"6"],[59,"7"],[60,"8"],[61,"9"],[62,"-"],[63,"_"]]),I=new Map(Array.from(b,t=>[t[1],t[0]]));function M(t,e=1){let r="";for(;e!=0&&(r=b.get(t%64)+r,t=Math.floor(t/64),t!=0););let o=e-r.length;for(let n=0;n<o;n++)r="A"+r;return r}function k(t){if(t.length==0)throw new Error("Empty string, conversion undefined.");let e=0;return[...t].reverse().forEach((o,n)=>{e|=I.get(o)<<n*6}),e}function P(t){return p.encode(t)}function j(t){return p.decode(t)}function R(t){let e=0;for(let r=0;r<t.length;r++)e=e*256+t[r];return e}export{D as B,z as a,P as b,k as c,j as d,M as i,R as r};
